
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spotify Now Playing</title>
    <script>
        async function getCurrentlyPlaying() {
            const token = 'BQD21UW8wQrxGnmC5tjzrPLfHv9wZJnD6HqRzn1sk2Q8HgMRENGdMMCm6zS6Wmtpu-Ym1E091h17LIUU2arBSZKKnXs1YjQbmWjVSrgmh0Z1gRSshJNOhUvbdMwKPX3m5S1C2A_jKEc';
            const response = await fetch('https://api.spotify.com/v1/me/player/currently-playing', {
                headers: {
                    'Authorization': 'Bearer ' + token
                }
            });
            const data = await response.json();
            if (data.item) {
                const track = data.item;
                const trackName = track.name;
                const artistName = track.artists[0].name;
                const progress = Math.floor(data.progress_ms / 1000); // Convert to seconds
                const duration = Math.floor(track.duration_ms / 1000); // Convert to seconds
                const progressMinutes = Math.floor(progress / 60);
                const progressSeconds = progress % 60;
                const durationMinutes = Math.floor(duration / 60);
                const durationSeconds = duration % 60;
                document.getElementById('track-info').textContent = `${trackName} by ${artistName} [${progressMinutes}:${progressSeconds < 10 ? '0' : ''}${progressSeconds} / ${durationMinutes}:${durationSeconds < 10 ? '0' : ''}${durationSeconds}]`;
                document.getElementById('spotify-embed').src = `https://open.spotify.com/embed/track/${track.id}`;
            }
        }
        setInterval(getCurrentlyPlaying, 10000); // Update every 10 seconds
    </script>
</head>
<body onload="getCurrentlyPlaying()">
    <h1>Now Playing on Spotify</h1>
    <p id="track-info">Loading...</p>
    <iframe id="spotify-embed" src="" width="300" height="80" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
</body>
</html>
